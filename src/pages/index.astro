---
import Button from "../components/Button.astro";
import Layout from "../Layout.astro";
import { Speaker } from "../lib/service";

const talks = await Speaker.showALlTalks();
---

<Layout>
	<section
		class="w-full h-[calc(100vh-70px)] flex flex-col justify-center items-center p-4"
	>
	<div class="w-4/5 h-full mx-auto bg-slate-500 rounded-xl shadow p-8 overflow-y-scroll">
		<div class="flex justify-end items-center ">
			<Button>
				<a
					href="/new-talk"
					>+ Nueva conferencia</a
				>
			</Button>
		</div>
			<table class="w-full">
				<thead class="text-left text-3xl font-bold text-white">
					<tr class="border-b-2 border-white">
						<th class="p-4">Fecha</th>
						<th class="p-4">Nombre</th>
						<th class="p-4">Descripcion</th>
						<th class="p-4">Estado</th>
					</tr>
				</thead>
				<tbody class="text-white">
					{
						talks.map((talk, index) => (
							<tr
								class:list={[
									"border-b-2 border-white",
									index % 2 === 0
										? "bg-slate-900"
										: "bg-slate-700",
								]}
							>
								<td class="p-4">{talk.date}</td>
								<td class="p-4">{talk.name}</td>
								<td class="p-4 max-w-3xs text-ellipsis overflow-hidden">{talk.description}</td>
								<td
									class:list={[
										"p-4",
										talk.state === "Aceptada"
											? "text-green-500"
											: "text-red-500",
									]}
								>
									{talk.state}
								</td>
							</tr>
						))
					}
				</tbody>
			</table>
		</div>
	</section>
</Layout>
